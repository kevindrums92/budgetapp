# Bug Tracker - BudgetApp

Lista de bugs y mejoras pendientes.

## üî¥ Cr√≠ticos

- [x] **CR√çTICO - P√©rdida de datos en re-login**: Al pedir re-login en prod, los datos de la nube fueron sobrescritos con un estado vac√≠o.
  - **Causa**: flujo SIGNED_OUT limpia localStorage, luego SIGNED_IN hace pull de nube pero si getCloudState() retorna null (migraci√≥n de schema, error de permisos, o race condition de m√∫ltiples pesta√±as), ejecuta upsertCloudState(getSnapshot()) que sube el estado VAC√çO, destruyendo los datos del usuario en la nube.
  - **Soluciones implementadas**:
    1. ‚úÖ Safeguard en `pushSnapshot()`: Bloquea push si snapshot est√° vac√≠o (0 transactions y 0 trips)
    2. ‚úÖ Safeguard en `initForSession()`: Verifica que local tenga datos antes de hacer push inicial
    3. ‚úÖ Sync lock: Previene race conditions cuando m√∫ltiples tabs/ventanas intentan sincronizar simult√°neamente
    4. ‚úÖ Logging completo: Console logs en todas las operaciones cr√≠ticas para debugging
  - **Archivo modificado**: `src/components/CloudSyncGate.tsx`

## üü° Moderados

- [ ] Cuando hago logout y quiero hacer login de vuelta, me hace login automaticamente con la misma cuenta, sin permitirme seleccionar otras cuentas de google

## üü¢ Menores / Mejoras

- [ ] en el onboarding wizard de budget, solo se puede deslizar en donde hay contenido, es decir en la mitada de la pantalla, pero si deslizo en la parte superior o abajo, no hace el efecto de drag
- [ ] Bug en la navegacion: pasos para reproducir: voy a ingresar un gasto nuevo, selecciono categoria, voy a crear nueva categoria, creo exitosamente la categoria, vuelvo atras (automaticamente). Aqui, solo en el caso que quisiera volver atras, tengo que presionar 2 veces la flecha de ir atras.

---

## ‚úÖ Resueltos
