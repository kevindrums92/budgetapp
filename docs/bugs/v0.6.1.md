# Bug Tracker - BudgetApp

Lista de bugs y mejoras pendientes.

## ğŸ”´ CrÃ­ticos

- [ ]

## ğŸŸ¡ Moderados

- [ ] 

## ğŸŸ¢ Menores / Mejoras

- [ ] 

---

## âœ… Resueltos

- [x] **CRÃTICO - PÃ©rdida de datos en re-login**: Al pedir re-login en prod, los datos de la nube fueron sobrescritos con un estado vacÃ­o.
  - **Causa**: flujo SIGNED_OUT limpia localStorage, luego SIGNED_IN hace pull de nube pero si getCloudState() retorna null (migraciÃ³n de schema, error de permisos, o race condition de mÃºltiples pestaÃ±as), ejecuta upsertCloudState(getSnapshot()) que sube el estado VACÃO, destruyendo los datos del usuario en la nube.
  - **Soluciones implementadas**:
    1. âœ… Safeguard en `pushSnapshot()`: Bloquea push si snapshot estÃ¡ vacÃ­o (0 transactions y 0 trips)
    2. âœ… Safeguard en `initForSession()`: Verifica que local tenga datos antes de hacer push inicial
    3. âœ… Sync lock: Previene race conditions cuando mÃºltiples tabs/ventanas intentan sincronizar simultÃ¡neamente
    4. âœ… Logging completo: Console logs en todas las operaciones crÃ­ticas para debugging
  - **Archivo modificado**: `src/components/CloudSyncGate.tsx`
